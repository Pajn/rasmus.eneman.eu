<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>It&#x27;s a matter of style</title>
    <meta name="HandheldFriendly" content="True">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link rel="shortcut icon" href="/favicon.ico">
    <link rel="stylesheet" href="/assets/style.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Merriweather:300,700,700italic,300italic|Inconsolata:400,700|Roboto+Slab">

    <link rel="canonical" href="https://rasmus.eneman.eu">
    <meta name="referrer" content="origin">

    <meta property="og:site_name" content="Rasmus Eneman">
    <meta property="og:type" content="website">
    <meta property="og:title" content="Rasmus Eneman">
    <meta property="og:description" content="Studying web developer and politically interested">
    <meta property="og:url" content="https://rasmus.eneman.eu">
    <meta property="og:image" content="https://rasmus.eneman.euassets/bg/1109x499.JPG">

    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Rasmus Eneman">
    <meta name="twitter:description" content="Studying web developer and politically interested">
    <meta name="twitter:url" content="https://rasmus.eneman.eu">
    <meta name="twitter:image:src" content="https://rasmus.eneman.euassets/bg/1109x499.JPG">

    <script src="//www.google-analytics.com/analytics.js" async></script>
    <script type="application/ld+json">
{
  "@context": "http://schema.org",
  "@type": "Website",
  "publisher": "Rasmus Eneman",
  "url": "https://rasmus.eneman.eu",
  "image": "https://rasmus.eneman.euassets/bg/1109x499.JPG",
  "description": "Studying web developer and politically interested"
}
    </script>

    <link rel="alternate" type="application/rss+xml" title="Rasmus Eneman" href="https://rasmus.eneman.eurss/">
    <script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-51338401-1', 'auto');
ga('send', 'pageview');
    </script>
  </head>
  <body>
    <header class="site-header">
      
    <nav>
      <a class="subscribe-button icon-feed" href="/rss/">Subscribe</a>
      <a class="back-button icon-arrow-left" href="/">Home</a>
    </nav>


    </header>
    <main>
      
    <article >
      <header>
        <h1>It&#x27;s a matter of style</h1>
        <section class="post-meta in-post">
          <time datetime="2015-12-03T00:00:00.000Z">3 December 2015</time>
        </section>
      </header>

      <section class="post-content">
        <p>Since I have previously have used React Native I was already familiar with inline CSS and continued on using it with React as I really appreciated it. I think inline styles is a great way to solve reuse and sharing of styles, ES6 have a great module system and with Object.assign or object spread it’s really easy to mixin common styles. It’s also clean and easy to make the styling depend on state and props by using Object.assign or ternary in the render method. So I really liked the inline styles idea that I had learned in React Native, however when I entered the harsh world of the web things started to change.</p>
<pre><code class="language-jsx"><span class="token tag" ><span class="token tag" ><span class="token punctuation" >&lt;</span>Widget</span> <span class="token attr-name" >grid</span><span class="token script language-javascript" ><span class="token punctuation" >=</span><span class="token punctuation" >{</span>grid<span class="token punctuation" >}</span></span> <span class="token attr-name" >configuration</span><span class="token script language-javascript" ><span class="token punctuation" >=</span><span class="token punctuation" >{</span>configuration<span class="token punctuation" >}</span></span><span class="token punctuation" >></span></span>
  <span class="token tag" ><span class="token tag" ><span class="token punctuation" >&lt;</span>div</span> <span class="token attr-name" >style</span><span class="token script language-javascript" ><span class="token punctuation" >=</span><span class="token punctuation" >{</span>styles<span class="token punctuation" >.</span>container<span class="token punctuation" >}</span></span><span class="token punctuation" >></span></span>
    <span class="token tag" ><span class="token tag" ><span class="token punctuation" >&lt;</span>h1</span> <span class="token attr-name" >style</span><span class="token script language-javascript" ><span class="token punctuation" >=</span><span class="token punctuation" >{</span>Object<span class="token punctuation" >.</span><span class="token function" >assign</span><span class="token punctuation" >(</span>styles<span class="token punctuation" >.</span>number<span class="token punctuation" >,</span> useSmallFont &amp;&amp; styles<span class="token punctuation" >.</span>small<span class="token punctuation" >)</span><span class="token punctuation" >}</span></span><span class="token punctuation" >></span></span><span class="token punctuation" >{</span>number<span class="token punctuation" >}</span><span class="token tag" ><span class="token tag" ><span class="token punctuation" >&lt;/</span>h1</span><span class="token punctuation" >></span></span>
    <span class="token punctuation" >{</span>unit <span class="token operator" >&amp;&amp;</span> <span class="token tag" ><span class="token tag" ><span class="token punctuation" >&lt;</span>h2</span> <span class="token attr-name" >style</span><span class="token script language-javascript" ><span class="token punctuation" >=</span><span class="token punctuation" >{</span>styles<span class="token punctuation" >.</span>unit<span class="token punctuation" >}</span></span><span class="token punctuation" >></span></span><span class="token punctuation" >{</span>unit<span class="token punctuation" >}</span><span class="token tag" ><span class="token tag" ><span class="token punctuation" >&lt;/</span>h2</span><span class="token punctuation" >></span></span><span class="token punctuation" >}</span>
  <span class="token tag" ><span class="token tag" ><span class="token punctuation" >&lt;/</span>div</span><span class="token punctuation" >></span></span>
<span class="token tag" ><span class="token tag" ><span class="token punctuation" >&lt;/</span>Widget</span><span class="token punctuation" >></span></span>
</code></pre>
<p><em>Looking good, for this case</em></p>
<p>In a world that’s enterable from a device with a mouse, you really want hover support. And with the diversity of the web you’ll need media queries sooner or later. I did also end up wanting to set some styles that apply to all elements of a certain type. All of this is impossible to do with inline styles, and inline styles is really a different world than CSS files so if you start to mix both of them things are getting ugly real fast. <a href="https://github.com/FormidableLabs/radium">Radium</a> tries to solve some of these problems, but I don’t really like having event listeners for mouseenter and mouseleave on all elements that users <code>:hover</code>. It also did not solve the tag-styles problem.</p>
<h4>CSS modules</h4>
<p>As I wanted something better than what inline styles were giving I went on a search and found a thing called CSS modules. The idea is that you write your CSS in CSS files (or with a preprocessor of your choice) but instead of adding them all to the page using <code>&lt;link&gt;</code> you instead import them in your component. They will be added automatically to the page when you import them and you’ll get an object with all classes in it that you can use to apply the styles to your components. I created a simple classNames helper to simplify merging styles in the render method so with that I can easily replace Object.assign.</p>
<p>The above example instead becomes:</p>
<pre><code class="language-jsx"><span class="token tag" ><span class="token tag" ><span class="token punctuation" >&lt;</span>Widget</span> <span class="token attr-name" >grid</span><span class="token script language-javascript" ><span class="token punctuation" >=</span><span class="token punctuation" >{</span>grid<span class="token punctuation" >}</span></span> <span class="token attr-name" >configuration</span><span class="token script language-javascript" ><span class="token punctuation" >=</span><span class="token punctuation" >{</span>configuration<span class="token punctuation" >}</span></span><span class="token punctuation" >></span></span>
  <span class="token tag" ><span class="token tag" ><span class="token punctuation" >&lt;</span>div</span> <span class="token attr-name" >className</span><span class="token script language-javascript" ><span class="token punctuation" >=</span><span class="token punctuation" >{</span>styles<span class="token punctuation" >.</span>container<span class="token punctuation" >}</span></span><span class="token punctuation" >></span></span>
    <span class="token tag" ><span class="token tag" ><span class="token punctuation" >&lt;</span>h1</span> <span class="token attr-name" >className</span><span class="token script language-javascript" ><span class="token punctuation" >=</span><span class="token punctuation" >{</span><span class="token function" >classNames</span><span class="token punctuation" >(</span>styles<span class="token punctuation" >.</span>number<span class="token punctuation" >,</span> useSmallFont &amp;&amp; styles<span class="token punctuation" >.</span>small<span class="token punctuation" >)</span><span class="token punctuation" >}</span></span><span class="token punctuation" >></span></span><span class="token punctuation" >{</span>number<span class="token punctuation" >}</span><span class="token tag" ><span class="token tag" ><span class="token punctuation" >&lt;/</span>h1</span><span class="token punctuation" >></span></span>
    <span class="token punctuation" >{</span>unit <span class="token operator" >&amp;&amp;</span> <span class="token tag" ><span class="token tag" ><span class="token punctuation" >&lt;</span>h2</span> <span class="token attr-name" >className</span><span class="token script language-javascript" ><span class="token punctuation" >=</span><span class="token punctuation" >{</span>styles<span class="token punctuation" >.</span>unit<span class="token punctuation" >}</span></span><span class="token punctuation" >></span></span><span class="token punctuation" >{</span>unit<span class="token punctuation" >}</span><span class="token tag" ><span class="token tag" ><span class="token punctuation" >&lt;/</span>h2</span><span class="token punctuation" >></span></span><span class="token punctuation" >}</span>
  <span class="token tag" ><span class="token tag" ><span class="token punctuation" >&lt;/</span>div</span><span class="token punctuation" >></span></span>
<span class="token tag" ><span class="token tag" ><span class="token punctuation" >&lt;/</span>Widget</span><span class="token punctuation" >></span></span>
</code></pre>
<h4>Sharing styles?</h4>
<p>As this pushes me back to CSS files I can’t leverage the ES6 module system for sharing styles. CSS modules does have a a way to import and export stuff, but I did instead choose Sass with the <code>.scss</code> syntax. This is because the project I did this change on <a href="https://github.com/drager/cetti">Cetti</a> uses the <a href="http://getmdl.io">mdl</a> library which uses Sass, so by choosing Sass a lot of definitions can be imported and reused.</p>
<h4>Component tag classes</h4>
<p>There are some places where the component used either is unique or where the same style should be applied to all the components of that type. For example this:</p>
<pre><code class="language-jsx"><span class="token tag" ><span class="token tag" ><span class="token punctuation" >&lt;</span>Layout</span> <span class="token attr-name" >fixedDrawer</span><span class="token punctuation" >></span></span>
  <span class="token tag" ><span class="token tag" ><span class="token punctuation" >&lt;</span>Drawer</span> <span class="token attr-name" >title</span><span class="token attr-value" ><span class="token punctuation" >=</span><span class="token punctuation" >'</span>Cetti<span class="token punctuation" >'</span></span> <span class="token attr-name" >className</span><span class="token script language-javascript" ><span class="token punctuation" >=</span><span class="token punctuation" >{</span>styles<span class="token punctuation" >.</span>drawer<span class="token punctuation" >}</span></span><span class="token punctuation" >></span></span>
    <span class="token tag" ><span class="token tag" ><span class="token punctuation" >&lt;</span>Navigation</span> <span class="token attr-name" >className</span><span class="token script language-javascript" ><span class="token punctuation" >=</span><span class="token punctuation" >{</span>styles<span class="token punctuation" >.</span>navigation<span class="token punctuation" >}</span></span><span class="token punctuation" >></span></span>
      <span class="token punctuation" >{</span>Object<span class="token punctuation" >.</span><span class="token function" >entries</span><span class="token punctuation" >(</span>dashboards<span class="token punctuation" >)</span><span class="token punctuation" >.</span><span class="token function" >map</span><span class="token punctuation" >(</span><span class="token punctuation" >(</span><span class="token punctuation" >[</span>id<span class="token punctuation" >,</span> dashboard<span class="token punctuation" >]</span><span class="token punctuation" >)</span> <span class="token operator" >=</span><span class="token operator" >></span>
          <span class="token tag" ><span class="token tag" ><span class="token punctuation" >&lt;</span>Link</span> <span class="token attr-name" >to</span><span class="token script language-javascript" ><span class="token punctuation" >=</span><span class="token punctuation" >{</span>`/$<span class="token punctuation" >{</span>id<span class="token punctuation" >}</span>`<span class="token punctuation" >}</span></span> <span class="token attr-name" >key</span><span class="token script language-javascript" ><span class="token punctuation" >=</span><span class="token punctuation" >{</span>id<span class="token punctuation" >}</span></span>
                <span class="token attr-name" >className</span><span class="token script language-javascript" ><span class="token punctuation" >=</span><span class="token punctuation" >{</span><span class="token function" >classNames</span><span class="token punctuation" >(</span>styles<span class="token punctuation" >.</span>navLink<span class="token punctuation" >,</span> id <span class="token punctuation" >=</span><span class="token punctuation" >=</span><span class="token punctuation" >=</span> params<span class="token punctuation" >.</span>id &amp;&amp; styles<span class="token punctuation" >.</span>active<span class="token punctuation" >)</span><span class="token punctuation" >}</span></span><span class="token punctuation" >></span></span>
            <span class="token punctuation" >{</span>dashboard<span class="token punctuation" >.</span>name<span class="token punctuation" >}</span>
          <span class="token tag" ><span class="token tag" ><span class="token punctuation" >&lt;/</span>Link</span><span class="token punctuation" >></span></span>
      <span class="token punctuation" >)</span><span class="token punctuation" >}</span>
    <span class="token tag" ><span class="token tag" ><span class="token punctuation" >&lt;/</span>Navigation</span><span class="token punctuation" >></span></span>
  <span class="token tag" ><span class="token tag" ><span class="token punctuation" >&lt;/</span>Drawer</span><span class="token punctuation" >></span></span>
  <span class="token tag" ><span class="token tag" ><span class="token punctuation" >&lt;</span>Content</span> <span class="token attr-name" >className</span><span class="token script language-javascript" ><span class="token punctuation" >=</span><span class="token punctuation" >{</span>styles<span class="token punctuation" >.</span>content<span class="token punctuation" >}</span></span><span class="token punctuation" >></span></span>
    <span class="token punctuation" >{</span><span class="token keyword" >this</span><span class="token punctuation" >.</span>props<span class="token punctuation" >.</span>children<span class="token punctuation" >}</span>
  <span class="token tag" ><span class="token tag" ><span class="token punctuation" >&lt;/</span>Content</span><span class="token punctuation" >></span></span>
<span class="token tag" ><span class="token tag" ><span class="token punctuation" >&lt;/</span>Layout</span><span class="token punctuation" >></span></span>
</code></pre>
<p>I didn’t like this very much so I created a simple Babel plugin that add those classes automatically (or rather Drawer gets styles.Drawer which make sure it doesn’t clash with a class that is accidentally named drawer and should be applied and also makes it clear in the CSS that this case is special). That’s avalible on Github as <a href="https://github.com/Pajn/babel-plugin-jsx-tagclass">babel-plugin-jsx-tagclass</a>. With that, the above code can be written as:</p>
<pre><code class="language-jsx"><span class="token tag" ><span class="token tag" ><span class="token punctuation" >&lt;</span>Layout</span> <span class="token attr-name" >fixedDrawer</span><span class="token punctuation" >></span></span>
  <span class="token tag" ><span class="token tag" ><span class="token punctuation" >&lt;</span>Drawer</span> <span class="token attr-name" >title</span><span class="token attr-value" ><span class="token punctuation" >=</span><span class="token punctuation" >'</span>Cetti<span class="token punctuation" >'</span></span><span class="token punctuation" >></span></span>
    <span class="token tag" ><span class="token tag" ><span class="token punctuation" >&lt;</span>Navigation</span><span class="token punctuation" >></span></span>
      <span class="token punctuation" >{</span>Object<span class="token punctuation" >.</span><span class="token function" >entries</span><span class="token punctuation" >(</span>dashboards<span class="token punctuation" >)</span><span class="token punctuation" >.</span><span class="token function" >map</span><span class="token punctuation" >(</span><span class="token punctuation" >(</span><span class="token punctuation" >[</span>id<span class="token punctuation" >,</span> dashboard<span class="token punctuation" >]</span><span class="token punctuation" >)</span> <span class="token operator" >=</span><span class="token operator" >></span>
          <span class="token tag" ><span class="token tag" ><span class="token punctuation" >&lt;</span>Link</span> <span class="token attr-name" >to</span><span class="token script language-javascript" ><span class="token punctuation" >=</span><span class="token punctuation" >{</span>`/$<span class="token punctuation" >{</span>id<span class="token punctuation" >}</span>`<span class="token punctuation" >}</span></span> <span class="token attr-name" >key</span><span class="token script language-javascript" ><span class="token punctuation" >=</span><span class="token punctuation" >{</span>id<span class="token punctuation" >}</span></span>
                <span class="token attr-name" >className</span><span class="token script language-javascript" ><span class="token punctuation" >=</span><span class="token punctuation" >{</span><span class="token function" >classNames</span><span class="token punctuation" >(</span>styles<span class="token punctuation" >.</span>navLink<span class="token punctuation" >,</span> id <span class="token punctuation" >=</span><span class="token punctuation" >=</span><span class="token punctuation" >=</span> params<span class="token punctuation" >.</span>id &amp;&amp; styles<span class="token punctuation" >.</span>active<span class="token punctuation" >)</span><span class="token punctuation" >}</span></span><span class="token punctuation" >></span></span>
            <span class="token punctuation" >{</span>dashboard<span class="token punctuation" >.</span>name<span class="token punctuation" >}</span>
          <span class="token tag" ><span class="token tag" ><span class="token punctuation" >&lt;/</span>Link</span><span class="token punctuation" >></span></span>
      <span class="token punctuation" >)</span><span class="token punctuation" >}</span>
    <span class="token tag" ><span class="token tag" ><span class="token punctuation" >&lt;/</span>Navigation</span><span class="token punctuation" >></span></span>
  <span class="token tag" ><span class="token tag" ><span class="token punctuation" >&lt;/</span>Drawer</span><span class="token punctuation" >></span></span>
  <span class="token tag" ><span class="token tag" ><span class="token punctuation" >&lt;</span>Content</span><span class="token punctuation" >></span></span>
    <span class="token punctuation" >{</span><span class="token keyword" >this</span><span class="token punctuation" >.</span>props<span class="token punctuation" >.</span>children<span class="token punctuation" >}</span>
  <span class="token tag" ><span class="token tag" ><span class="token punctuation" >&lt;/</span>Content</span><span class="token punctuation" >></span></span>
<span class="token tag" ><span class="token tag" ><span class="token punctuation" >&lt;/</span>Layout</span><span class="token punctuation" >></span></span>
</code></pre>
<p><em>Which is much cleaner in my opinion.</em></p>
<h4>Drawbacks</h4>
<p>There are some things that still bugs me a bit with CSS modules. Firstly, it seems like the same class name can’t be reused in different components. This is a bit silly as the class name is rewritten to something unreadable but for me, the same class name gets rewritten to the same thing in all files. I believe this is a bug though so I opened an <a href="https://github.com/webpack/css-loader/issues/198">issue</a> about it. However this is probably an easy fix so I don’t take it as too problematic right now.</p>
<p>Second, in the above code you see <code>styles.active</code> but in the CSS it’s nested:</p>
<pre><code class="language-scss"><span class="token selector" >.navLink </span><span class="token punctuation" >{</span>
  <span class="token comment" spellcheck="true">// ...</span>

  <span class="token selector" >&amp;.active </span><span class="token punctuation" >{</span>
    <span class="token comment" spellcheck="true">// ...</span>
  <span class="token punctuation" >}</span>
<span class="token punctuation" >}</span>
</code></pre>
<p>I would like this nesting to persist in the styles object I get so that it’s clear what “active” actually means.</p>
<p>Third, when everything was defined in Typescript I got intellisense on the style object as well as errors if I accessed a missing property. That’s now gone. I have a theory that I should be able to create a tool that generates type definitions from the CSS modules so that I can again get that help, but for now it’s gone.</p>

      </section>
    </article>

    <aside>
      <div id="comments"></div>
      <script src="https://apis.google.com/js/plusone.js"></script>
      <script>
        var commentsWidth = document.getElementById('comments').offsetWidth;
        window.addEventListener('load', function () {
          gapi.comments.render('comments', {
            href: 'https://rasmus.eneman.eu/its-a-matter-of-style/',
            width: commentsWidth,
            first_party_property: 'BLOGGER',
            view_type: 'FILTERED_POSTMOD',
          });
        });
     </script>
    </aside>


    </main>
    <footer class="site-footer">
      <section class="copyright">
        <a href="https://rasmus.eneman.eu">Rasmus Eneman</a> © 2015
        <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA</a>
        Some rights reserved
      </section>
    </footer>
  </body>
</html>
